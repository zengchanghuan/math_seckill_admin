# PDF真题录入完整工作流程

## 🎯 目标

通过Web界面上传PDF → 自动预处理 → 人工校验 → 保存题库

**效率提升5-7倍！**

---

## 🚀 完整流程（推荐使用）

### 步骤1：确保服务运行

#### 启动后端服务
```bash
cd /Users/zengchanghuan/Desktop/workspace/flutter/math_seckill_server
source venv/bin/activate
uvicorn main:app --reload --host 0.0.0.0 --port 8000
```

看到：
```
INFO:     Uvicorn running on http://0.0.0.0:8000
INFO:     Application startup complete.
```

#### 启动Web管理后台
```bash
cd /Users/zengchanghuan/Desktop/workspace/flutter/math_seckill_admin
npm run dev
```

访问：http://localhost:5173

---

### 步骤2：上传PDF

#### 在Web界面
```
1. 打开浏览器：http://localhost:5173
2. 点击侧边栏：📄 PDF导入
3. 拖拽或点击上传PDF文件
```

#### 自动处理过程
```
┌────────────────────────────┐
│ 📄 PDF真题导入             │
├────────────────────────────┤
│  [拖拽PDF到此处]           │
├────────────────────────────┤
│  处理进度：                │
│  ✓ 上传PDF                 │ ← 文件上传到服务器
│  ✓ 页面提取               │ ← Python提取每页为图片
│  ✓ OCR识别                │ ← 自动识别文字
│  ✓ 题目切分               │ ← 智能切分题目
│                            │
│  ████████████████ 100%     │
├────────────────────────────┤
│  结果：                    │
│  PDF文件：exam.pdf         │
│  总页数：10页              │
│  提取题目：25道            │
│                            │
│  [✅ 开始校验题目]         │
└────────────────────────────┘
```

---

### 步骤3：人工校验

#### 点击"开始校验题目"后

```
校验进度：1 / 25  ████░░░░ 4%

┌──────────────────┬──────────────────┐
│  📷 原始PDF图    │  ✏️ 题目编辑     │
├──────────────────┼──────────────────┤
│                  │  题号：1         │
│  [题目截图]      │                  │
│  这是原PDF中     │  题目内容：      │
│  这道题的图片    │  ┌─────────────┐ │
│                  │  │计算：sin(30°)│ │
│  可以：          │  │= ?          │ │
│  - 放大查看      │  └─────────────┘ │
│  - 缩小         │  ↑ OCR已预填     │
│  - 拖动         │                  │
│                  │  📐 LaTeX公式：  │
│                  │  ┌─────────────┐ │
│                  │  │\sin(30^\circ│ │
│                  │  │) = ?        │ │
│                  │  └─────────────┘ │
│                  │  预览：sin(30°)=?│
│                  │                  │
│                  │  选项：          │
│                  │  A. [0.5]       │ │
│                  │  B. [0.707]     │ │
│                  │  C. [0.866]     │ │
│                  │  D. [1]         │ │
│                  │  ↑ OCR已预填     │
│                  │                  │
│                  │  标准答案：[A]  │
│                  │                  │
│                  │  知识点标签：    │
│                  │  ☑三角函数      │
│                  │  ☑特殊值        │
│                  │  □三角方程      │
│                  │                  │
│                  │  题目解析：      │
│                  │  ┌─────────────┐ │
│                  │  │sin(30°)=1/2 │ │
│                  │  └─────────────┘ │
└──────────────────┴──────────────────┘

      [←上一题] [跳过] [✓保存] [下一题→]
```

#### 你需要做的（每题2-3分钟）：

**1. 检查题目文本（10秒）**
- OCR已预填，通常90%正确
- 修正少量识别错误

**2. 添加LaTeX公式（1分钟）**
- 数学公式OCR识别率低，需人工输入
- 输入LaTeX代码（如 `\sin(30^\circ)`）
- 实时预览，确保正确
- 可使用快捷按钮

**3. 检查选项（20秒）**
- OCR已预填选项
- 修正错误（如果有）

**4. 填写答案和解析（30秒）**
- 填写标准答案（如 A）
- 填写题目解析

**5. 选择知识点（20秒）**
- 从预设标签快速多选
- 如：三角函数、特殊值

**6. 保存并下一题（10秒）**
- 点击"保存"
- 自动跳转到下一题

**总计：约2-3分钟/题**

---

### 步骤4：批量完成

```
重复步骤3，逐题校验
↓
完成所有25道题
↓
题目自动保存到题库
↓
可以在"题目管理"中查看
```

---

## 💡 效率对比

### 传统手工录入
```
1题 = 打字(5分钟) + 公式(3分钟) + 校对(2分钟) = 10分钟
25题 = 250分钟 (4小时)
```

### 使用本系统
```
预处理 = 自动(2分钟，一次性)
1题 = 检查(10秒) + 公式(1分钟) + 补充(1分钟) = 2-3分钟
25题 = 2分钟 + 25×2.5分钟 = 64分钟 (1小时)

节省时间：3小时！
效率提升：4倍！
```

---

## 🎯 LaTeX公式输入技巧

### 快捷按钮
```
点击按钮自动插入：
[分数] → \frac{}{}
[根号] → \sqrt{}
[sin] → \sin
[cos] → \cos
[π] → \pi
[上标] → ^{}
```

### 常用公式模板
```latex
三角函数：\sin(30^\circ)
分数：\frac{1}{2}
根号分数：\frac{\sqrt{2}}{2}
积分：\int_0^\infty
求和：\sum_{i=1}^n
极限：\lim_{x \to 0}
```

### Mathpix辅助（推荐）
```
1. 下载Mathpix Snipping Tool
2. 截图PDF中的公式
3. 自动转为LaTeX
4. 复制粘贴到编辑框
5. 检查预览确认

大大加速公式输入！
```

---

## 📊 实际案例

### 处理100道真题

**你的时间投入：**
```
1. 上传PDF：1分钟
2. 等待自动处理：10分钟
3. 人工校验100题：200-300分钟（每题2-3分钟）
总计：211-311分钟 (3.5-5小时)

传统手工录入：1000-1500分钟 (16-25小时)

节省：12-20小时！
```

---

## ⚙️ 系统架构

```
你的操作：                自动处理：
┌─────────┐              ┌──────────┐
│上传PDF  │─────────────→│后端接收  │
└─────────┘              └─────┬────┘
                               │
                         ┌─────▼────┐
                         │PDF提取   │ ← Python
                         │每页→图片 │
                         └─────┬────┘
                               │
                         ┌─────▼────┐
                         │OCR识别   │ ← Tesseract
                         │图片→文字 │
                         └─────┬────┘
                               │
                         ┌─────▼────┐
                         │题目切分  │ ← 智能算法
                         │识别题号  │
                         └─────┬────┘
                               │
┌─────────┐              ┌─────▼────┐
│Web界面  │←─────────────│返回数据  │
│显示结果│              │待校验    │
└─────┬───┘              └──────────┘
      │
┌─────▼────┐
│人工校验  │ ← 你在这里工作
│修正错误  │
│添加公式  │
│选标签    │
└─────┬────┘
      │
┌─────▼────┐
│保存题库  │
└──────────┘
```

---

## ✅ 环境已就绪清单

```
✅ Tesseract OCR 5.5.1
✅ Python依赖已安装（虚拟环境）
✅ FastAPI后端（含PDF处理API）
✅ Vue Web管理后台
✅ LaTeX渲染（KaTeX）
✅ 图表展示（ECharts）
```

---

## 🔥 立即开始

### 1. 启动服务（2个终端）

**终端1（后端）：**
```bash
cd /Users/zengchanghuan/Desktop/workspace/flutter/math_seckill_server
source venv/bin/activate
uvicorn main:app --reload --host 0.0.0.0 --port 8000
```

**终端2（Web）：**
```bash
cd /Users/zengchanghuan/Desktop/workspace/flutter/math_seckill_admin
npm run dev
```

### 2. 访问Web界面
```
http://localhost:5173
```

### 3. 开始录入
```
侧边栏 → 📄 PDF导入
→ 上传你的PDF
→ 等待处理（2-10分钟，取决于页数）
→ 点击"开始校验"
→ 逐题修正和补充
→ 保存完成！
```

---

## 💻 两个服务必须都运行

```
服务1：后端 (localhost:8000)
  - 处理PDF
  - 运行OCR
  - 提供API

服务2：Web前端 (localhost:5173)
  - 上传界面
  - 校验界面
  - 数据展示
```

---

**准备好你的PDF文件，开始高效录入吧！** 🚀📄

需要我帮你测试第一个PDF吗？
